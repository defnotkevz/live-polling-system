import React, { useState, useEffect } from 'react';
import StudentDashboard from './StudentDashboard';
import TeacherDashboard from './TeacherDashboard';

function RoleComponent() {
  const [role, setRole] = useState('');

  const savedRole = sessionStorage.getItem('role');

  useEffect(() => {
    if (savedRole) {
      setRole(savedRole);
    }
  }, []);

  const handleRoleSelect = (selectedRole) => {
    sessionStorage.setItem('role', selectedRole);
    setRole(selectedRole);
  };

  if (!sessionStorage.getItem('role')) {
    return (
      <div className="flex flex-col justify-center items-center h-full">
        <div className="mb-16">
          <h2 className="text-center text-2xl font-extrabold">
            What's your Role?
          </h2>
          <h4 className="text-xl">Please select your role to continue.</h4>
        </div>
        <div className="flex gap-5">
          <button
            className="bg-red-500 h-60 w-60 rounded-2xl shadow-lg flex flex-col justify-center items-center hover:bg-red-600"
            onClick={() => handleRoleSelect('teacher')}
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              height="8em"
              fill="currentColor"
              viewBox="0 0 512 512"
            >
              <path d="M 102.4 91.48852459016393 Q 103.23934426229508 72.18360655737705 119.18688524590164 62.11147540983607 Q 135.97377049180326 53.718032786885246 152.76065573770492 62.11147540983607 Q 168.70819672131148 72.18360655737705 169.54754098360655 91.48852459016393 Q 168.70819672131148 110.79344262295082 152.76065573770492 120.8655737704918 Q 135.97377049180326 129.25901639344264 119.18688524590164 120.8655737704918 Q 103.23934426229508 110.79344262295082 102.4 91.48852459016393 L 102.4 91.48852459016393 Z M 182.97704918032787 91.48852459016393 Q 182.1377049180328 64.62950819672132 159.47540983606558 51.2 Q 135.97377049180326 37.77049180327869 112.47213114754098 51.2 Q 89.80983606557378 64.62950819672132 88.97049180327869 91.48852459016393 Q 89.80983606557378 118.34754098360656 112.47213114754098 131.77704918032788 Q 135.97377049180326 145.2065573770492 159.47540983606558 131.77704918032788 Q 182.1377049180328 118.34754098360656 182.97704918032787 91.48852459016393 L 182.97704918032787 91.48852459016393 Z M 77.21967213114755 190.5311475409836 Q 91.48852459016393 166.19016393442624 119.18688524590164 165.35081967213114 L 185.4950819672131 165.35081967213114 L 297.127868852459 165.35081967213114 Q 309.71803278688526 166.19016393442624 310.55737704918033 178.78032786885245 Q 309.71803278688526 191.3704918032787 297.127868852459 192.20983606557377 L 196.40655737704918 192.20983606557377 L 196.40655737704918 192.20983606557377 Q 183.81639344262294 193.04918032786884 182.97704918032787 205.63934426229508 L 182.97704918032787 252.64262295081969 L 182.97704918032787 252.64262295081969 L 182.97704918032787 252.64262295081969 L 182.97704918032787 252.64262295081969 L 182.97704918032787 447.3704918032787 L 182.97704918032787 447.3704918032787 Q 182.1377049180328 459.96065573770494 169.54754098360655 460.8 Q 156.95737704918034 459.96065573770494 156.11803278688524 447.3704918032787 L 156.11803278688524 346.64918032786886 L 156.11803278688524 346.64918032786886 Q 154.4393442622951 328.18360655737706 135.97377049180326 326.50491803278686 Q 117.50819672131148 328.18360655737706 115.8295081967213 346.64918032786886 L 115.8295081967213 447.3704918032787 L 115.8295081967213 447.3704918032787 Q 114.99016393442623 459.96065573770494 102.4 460.8 Q 89.80983606557378 459.96065573770494 88.97049180327869 447.3704918032787 L 88.97049180327869 252.64262295081969 L 88.97049180327869 252.64262295081969 Q 88.1311475409836 246.7672131147541 82.25573770491803 245.92786885245903 Q 76.38032786885246 246.7672131147541 75.54098360655738 252.64262295081969 L 75.54098360655738 447.3704918032787 L 75.54098360655738 447.3704918032787 Q 75.54098360655738 459.1213114754098 83.09508196721312 466.67540983606557 Q 90.64918032786885 474.2295081967213 102.4 474.2295081967213 Q 114.15081967213115 474.2295081967213 121.70491803278688 466.67540983606557 Q 129.25901639344264 459.1213114754098 129.25901639344264 447.3704918032787 L 129.25901639344264 346.64918032786886 L 129.25901639344264 346.64918032786886 Q 130.0983606557377 340.7737704918033 135.97377049180326 339.9344262295082 Q 141.84918032786885 340.7737704918033 142.68852459016392 346.64918032786886 L 142.68852459016392 447.3704918032787 L 142.68852459016392 447.3704918032787 Q 142.68852459016392 459.1213114754098 150.24262295081968 466.67540983606557 Q 157.7967213114754 474.2295081967213 169.54754098360655 474.2295081967213 Q 181.2983606557377 474.2295081967213 188.85245901639345 466.67540983606557 Q 196.40655737704918 459.1213114754098 196.40655737704918 447.3704918032787 L 196.40655737704918 259.35737704918034 L 196.40655737704918 259.35737704918034 L 196.40655737704918 259.35737704918034 L 196.40655737704918 259.35737704918034 L 196.40655737704918 205.63934426229508 L 196.40655737704918 205.63934426229508 L 297.127868852459 205.63934426229508 L 297.127868852459 205.63934426229508 Q 308.8786885245902 205.63934426229508 316.4327868852459 198.08524590163935 Q 323.98688524590165 190.5311475409836 323.98688524590165 178.78032786885245 Q 323.98688524590165 167.0295081967213 316.4327868852459 159.47540983606558 Q 308.8786885245902 151.92131147540982 297.127868852459 151.92131147540982 L 256.83934426229507 151.92131147540982 L 256.83934426229507 151.92131147540982 L 256.83934426229507 84.77377049180328 L 256.83934426229507 84.77377049180328 Q 256.83934426229507 73.02295081967213 264.39344262295083 65.46885245901639 Q 271.94754098360653 57.91475409836065 283.6983606557377 57.91475409836065 L 471.71147540983605 57.91475409836065 L 471.71147540983605 57.91475409836065 Q 483.4622950819672 57.91475409836065 491.0163934426229 65.46885245901639 Q 498.5704918032787 73.02295081967213 498.5704918032787 84.77377049180328 L 498.5704918032787 272.78688524590166 L 498.5704918032787 272.78688524590166 Q 498.5704918032787 284.5377049180328 491.0163934426229 292.09180327868853 Q 483.4622950819672 299.6459016393443 471.71147540983605 299.6459016393443 L 283.6983606557377 299.6459016393443 L 283.6983606557377 299.6459016393443 Q 271.94754098360653 299.6459016393443 264.39344262295083 292.09180327868853 Q 256.83934426229507 284.5377049180328 256.83934426229507 272.78688524590166 L 256.83934426229507 232.4983606557377 L 256.83934426229507 232.4983606557377 L 243.40983606557376 232.4983606557377 L 243.40983606557376 232.4983606557377 L 243.40983606557376 272.78688524590166 L 243.40983606557376 272.78688524590166 Q 244.24918032786886 289.57377049180326 255.16065573770493 301.32459016393443 Q 266.91147540983604 312.2360655737705 283.6983606557377 313.07540983606555 L 471.71147540983605 313.07540983606555 L 471.71147540983605 313.07540983606555 Q 488.4983606557377 312.2360655737705 500.2491803278688 301.32459016393443 Q 511.16065573770493 289.57377049180326 512 272.78688524590166 L 512 84.77377049180328 L 512 84.77377049180328 Q 511.16065573770493 67.98688524590163 500.2491803278688 56.23606557377049 Q 488.4983606557377 45.324590163934424 471.71147540983605 44.485245901639345 L 283.6983606557377 44.485245901639345 L 283.6983606557377 44.485245901639345 Q 266.91147540983604 45.324590163934424 255.16065573770493 56.23606557377049 Q 244.24918032786886 67.98688524590163 243.40983606557376 84.77377049180328 L 243.40983606557376 151.92131147540982 L 243.40983606557376 151.92131147540982 L 185.4950819672131 151.92131147540982 L 119.18688524590164 151.92131147540982 Q 83.09508196721312 153.6 65.46885245901639 183.81639344262294 L 2.518032786885246 303.0032786885246 L 2.518032786885246 303.0032786885246 Q 0 308.8786885245902 5.036065573770492 312.2360655737705 Q 10.911475409836065 314.75409836065575 14.268852459016394 309.71803278688526 L 77.21967213114755 190.5311475409836 L 77.21967213114755 190.5311475409836 Z" />
            </svg>
            <span className="text-2xl">Teacher</span>
          </button>
          <button
            className="bg-yellow-500 h-60 w-60 rounded-2xl shadow-lg flex flex-col justify-center items-center hover:bg-yellow-600"
            onClick={() => handleRoleSelect('student')}
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              height="8em"
              fill="currentColor"
              viewBox="0 0 512 512"
            >
              <path d="M 242.02184087363494 91.85647425897037 L 17.57254290171607 173.32917316692667 L 242.02184087363494 91.85647425897037 L 17.57254290171607 173.32917316692667 Q 13.578783151326054 174.9266770670827 13.578783151326054 178.9204368174727 Q 13.578783151326054 182.91419656786272 17.57254290171607 185.31045241809673 L 92.65522620904837 211.66926677067082 L 92.65522620904837 211.66926677067082 Q 107.83151326053041 199.68798751950078 127.00156006240249 192.49921996879874 L 254.00312012480498 144.57410296411857 L 254.00312012480498 144.57410296411857 Q 259.594383775351 142.97659906396257 262.78939157566305 148.56786271450858 Q 263.58814352574103 154.1591263650546 258.795631825273 156.5553822152886 L 130.9953198127925 204.4804992199688 L 130.9953198127925 204.4804992199688 Q 118.21528861154447 209.2730109204368 107.03276131045241 217.26053042121686 L 242.02184087363494 265.98439937597504 L 242.02184087363494 265.98439937597504 Q 249.21060842433698 268.38065522620906 256.399375975039 268.38065522620906 Q 263.58814352574103 268.38065522620906 270.77691107644307 265.98439937597504 L 495.2262090483619 185.31045241809673 L 495.2262090483619 185.31045241809673 Q 499.21996879875195 182.91419656786272 499.21996879875195 178.9204368174727 Q 499.21996879875195 174.9266770670827 495.2262090483619 173.32917316692667 L 270.77691107644307 91.85647425897037 L 270.77691107644307 91.85647425897037 Q 263.58814352574103 89.46021840873635 256.399375975039 89.46021840873635 Q 249.21060842433698 89.46021840873635 242.02184087363494 91.85647425897037 L 242.02184087363494 91.85647425897037 Z M 237.22932917316692 277.9656786271451 L 95.05148205928238 226.84555382215288 L 237.22932917316692 277.9656786271451 L 95.05148205928238 226.84555382215288 Q 60.70514820592824 257.996879875195 58.308892355694226 305.9219968798752 L 63.90015600624025 321.09828393135723 L 63.90015600624025 321.09828393135723 Q 77.4789391575663 356.2433697347894 77.4789391575663 394.58346333853353 L 77.4789391575663 428.13104524180966 L 77.4789391575663 428.13104524180966 Q 77.4789391575663 431.32605304212166 75.08268330733229 432.9235569422777 Q 72.68642745709829 435.3198127925117 69.49141965678628 434.5210608424337 L 5.591263650546022 415.3510140405616 L 5.591263650546022 415.3510140405616 Q 2.3962558502340094 413.75351014040564 0.7987519500780031 410.5585023400936 Q 0 407.3634945397816 2.3962558502340094 404.96723868954757 L 9.585023400936038 396.18096723868956 L 9.585023400936038 396.18096723868956 Q 32.748829953198126 367.42589703588146 40.73634945397816 331.48205928237127 L 45.528861154446176 305.9219968798752 L 45.528861154446176 305.9219968798752 Q 47.92511700468019 256.399375975039 82.27145085803433 222.05304212168485 L 13.578783151326054 197.29173166926677 L 13.578783151326054 197.29173166926677 Q 1.5975039001560063 191.70046801872076 0.7987519500780031 178.9204368174727 Q 1.5975039001560063 166.14040561622465 13.578783151326054 160.54914196567861 L 237.22932917316692 79.87519500780031 L 237.22932917316692 79.87519500780031 Q 246.81435257410297 76.6801872074883 256.399375975039 76.6801872074883 Q 265.98439937597504 76.6801872074883 275.5694227769111 79.87519500780031 L 499.21996879875195 160.54914196567861 L 499.21996879875195 160.54914196567861 Q 511.201248049922 166.14040561622465 512 178.9204368174727 Q 511.201248049922 191.70046801872076 499.21996879875195 197.29173166926677 L 275.5694227769111 277.9656786271451 L 275.5694227769111 277.9656786271451 Q 265.98439937597504 281.1606864274571 256.399375975039 281.1606864274571 Q 246.81435257410297 281.1606864274571 237.22932917316692 277.9656786271451 L 237.22932917316692 277.9656786271451 Z M 127.8003120124805 265.18564742589706 L 115.81903276131045 377.8096723868955 L 127.8003120124805 265.18564742589706 L 115.81903276131045 377.8096723868955 Q 115.02028081123245 380.2059282371295 123.80655226209048 388.19344773790954 Q 132.59282371294853 396.97971918876755 152.5616224648986 404.1684867394696 Q 193.29797191887675 420.9422776911076 256.399375975039 421.74102964118566 Q 319.50078003120126 420.9422776911076 360.2371294851794 404.1684867394696 Q 380.2059282371295 396.97971918876755 388.9921996879875 388.19344773790954 Q 397.77847113884553 380.2059282371295 396.97971918876755 377.8096723868955 L 384.9984399375975 265.18564742589706 L 384.9984399375975 265.18564742589706 L 397.77847113884553 261.191887675507 L 397.77847113884553 261.191887675507 L 409.7597503900156 377.01092043681746 L 409.7597503900156 377.01092043681746 Q 408.16224648985957 399.37597503900156 365.02964118564745 416.14976599063965 Q 321.8970358814353 433.72230889235567 256.399375975039 434.5210608424337 Q 190.90171606864274 433.72230889235567 147.76911076443056 416.14976599063965 Q 104.6365054602184 399.37597503900156 103.0390015600624 377.01092043681746 L 115.02028081123245 261.191887675507 L 115.02028081123245 261.191887675507 L 127.8003120124805 265.18564742589706 L 127.8003120124805 265.18564742589706 Z M 52.71762870514821 333.8783151326053 Q 44.730109204368176 373.81591263650546 19.170046801872076 404.96723868954757 L 18.371294851794072 405.7659906396256 L 18.371294851794072 405.7659906396256 L 64.69890795631825 419.34477379095165 L 64.69890795631825 419.34477379095165 L 64.69890795631825 394.58346333853353 L 64.69890795631825 394.58346333853353 Q 64.69890795631825 361.8346333853354 53.51638065522621 329.8845553822153 L 52.71762870514821 333.8783151326053 L 52.71762870514821 333.8783151326053 Z" />
            </svg>
            <span className="text-2xl">Student</span>
          </button>
        </div>
      </div>
    );
  }

  return (
    <div>
      {savedRole === 'teacher' && <TeacherDashboard />}
      {savedRole === 'student' && <StudentDashboard />}
    </div>
  );
}

export default RoleComponent;
